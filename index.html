<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desobscufator | NeonFart</title>
    <style>
        :root { --bg: #1a1e23; --card: #252a33; --acc: #00a2ff; --txt: #e0e0e0; }
        body { font-family: sans-serif; background: var(--bg); color: var(--txt); display: flex; flex-direction: column; align-items: center; padding: 20px; }
        .container { display: flex; gap: 20px; width: 100%; max-width: 1100px; flex-wrap: wrap; }
        .box { flex: 1; min-width: 300px; background: var(--card); padding: 15px; border-radius: 10px; border: 1px solid #3f4756; }
        textarea { width: 100%; height: 350px; background: #1d2129; border: 1px solid #3f4756; color: #fff; padding: 10px; box-sizing: border-box; font-family: monospace; margin-top: 10px; }
        button { background: var(--acc); color: white; border: none; padding: 12px 30px; border-radius: 20px; cursor: pointer; font-weight: bold; margin-top: 20px; }
        h1 { color: white; margin-bottom: 5px; }
    </style>
</head>
<body>

    <h1>Desobscufator</h1>
    <p style="color:#888; margin-bottom:20px;">NeonFart Multi-Decoder Edition</p>

    <div class="container">
        <div class="box">
            <span>INPUT (Code Obfusqué)</span>
            <textarea id="input" placeholder="Colle le code ici..."></textarea>
        </div>
        <div class="box">
            <span>OUTPUT (Code Potable)</span>
            <textarea id="output" readonly placeholder="Le résultat apparaîtra ici..."></textarea>
        </div>
    </div>

    <button onclick="process()">DÉSOBFUSQUER</button>

    <script>
        function process() {
            let input = document.getElementById('input').value;
            let out = document.getElementById('output');
            
            // Logique Shield (Math)
            const shieldArr = input.match(/\{\s*([\d\s,]+)\s*\}/);
            const shieldMath = input.match(/char\(.*?\s*([+-])\s*(\d+)\)/);

            if (shieldArr && shieldMath) {
                const nums = shieldArr[1].split(',').map(n => parseInt(n.trim()));
                const op = shieldMath[1];
                const val = parseInt(shieldMath[2]);
                let res = "";
                nums.forEach(n => { res += String.fromCharCode(op === "-" ? n - val : n + val); });
                out.value = "-- [RECONSTRUCTED SHIELD]\n" + res;
                return;
            }

            // Logique VM (Nettoyage simple)
            let clean = input.replace(/\\(\d{1,3})/g, (m, p) => String.fromCharCode(parseInt(p, 10)));
            clean = clean.replace(/local\s/g, '\nlocal ').replace(/then/g, ' then\n').replace(/end/g, '\nend');
            
            out.value = "-- [RECONSTRUCTED VM/GENERIC]\n" + clean;
        }
    </script>
</body>
</html>
